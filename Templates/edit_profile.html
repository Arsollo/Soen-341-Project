{% extends "layout.html" %}
{% block content %}
<div class="content-section">
    <!-- Display error/warning messages -->
   {% with messages = get_flashed_messages(with_categories=true) %}
       {% for category, message in messages %}
           <div class="{{ category }}">{{ message }}</div>
       {% endfor %}
   {% endwith %}
   <form method="POST" action="{{url_for('update_user_profile') }}">
       {{ form.hidden_tag() }}
       <fieldset class="form-group">
           <legend class="border-bottom mb-4">Change Information</legend>
           <div class="form-group">
               {{ form.username.label(class="form-control-label") }}

               {% if form.username.errors %}
                   {{ form.username(class="form-control form-control-lg is-invalid") }}
                   <div class="invalid-feedback">
                       {% for error in form.username.errors %}
                           <span>{{ error }}</span>
                       {% endfor %}
                   </div>
               {% else %}
                   {{ form.username(class="form-control form-control-lg", value = user_name) }}

               {% endif %}
           </div>
           <div class="form-group">
               {{ form.email.label(class="form-control-label") }}
               {% if form.email.errors %}
                   {{ form.email(class="form-control form-control-lg is-invalid") }}
                   <div class="invalid-feedback">
                       {% for error in form.email.errors %}
                           <span>{{ error }}</span>
                       {% endfor %}
                   </div>
               {% else %}
                   {{ form.email(class="form-control form-control-lg", value = email) }}
               {% endif %}
           </div>
           <div class="form-group">
               {{ form.password.label(class="form-control-label") }}
               {% if form.password.errors %}
                   {{ form.password(class="form-control form-control-lg is-invalid") }}
                   <div class="invalid-feedback">
                       {% for error in form.password.errors %}
                           <span>{{ error }}</span>
                       {% endfor %}
                   </div>
               {% else %}
                   {{ form.password(class="form-control form-control-lg", value = user_password) }}
               {% endif %}
           </div>
           <div class="form-group">
               {{ form.confirm_password.label(class="form-control-label") }}
               {% if form.confirm_password.errors %}
                   {{ form.confirm_password(class="form-control form-control-lg is-invalid") }}
                   <div class="invalid-feedback">
                       {% for error in form.confirm_password.errors %}
                           <span>{{ error }}</span>
                       {% endfor %}
                   </div>
               {% else %}
                   {{ form.confirm_password(class="form-control form-control-lg", value = password) }}
               {% endif %}
           </div>
       </fieldset>
       <div class="form-group">
           {{ form.submit(class="btn btn-outline-info") }}
       </div>
   </form>
</div>
            <button id="discard_button" onclick="window.location.href='{{ url_for( 'profile') }}';" type="button">Discard Changes</button>
            

        </form>
        

    </div>
  
{% endblock content %}