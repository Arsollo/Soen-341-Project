{% extends 'home.html' %}
{% block title %}View Question{% endblock %}

{% block content %}
      <div class="page-header">
        <h1>{{ question.q_text }}</h1>
      </div>
        <div class="row">
          <div class="col-lg-12">
            <div class="well bs-component">
              <form class="form-horizontal" method="POST" action="{{ url_for('question', question_id=question.id) }}">
                <h4 class="list-group-item-heading">{{ question.q_text }}</h4>
                <p class="list-group-item-text">Asked by ID: {{ question.asked_by_id }}</p>
                <p class="list-group-item-text">Poseted on: {{ question.post_time }}</p>
                <!-- Print the answers in the order they were posted -->
                 {% for answer in answers %}
                 <p class="list-group-item-text">Answered ID: {{ answer.id }}</p>
                  <p class="list-group-item-text">Answer: {{ answer.a_text }}</p>
                  <p class="list-group-item-text">Answered by: {{ answer.answered_by_id }}</p>
                  <p class="list-group-item-text">Poseted on: {{ answer.post_time }}</p>
                  <p class="list-group-item-text">Votes {{ answer.votes }}</p>
                  <!-- A button to allow for voting  for any authenticated used-->
                  {%if current_user.is_authenticated %}
                  <button type="submit" class="vote-btn" name="vote" value= "vote">
                    <span class="icon"></span> <span class="text">Helpful?</span>
                    </button>
                  {%endif %}
                  {%if current_user.is_authenticated and current_user.username == question.asked_by_id%}
                  <!-- A second button visible to original poster to choose best answer-->
                  <button type="submit" class="vote-btn" name="solved" value= "solved">
                  <span class="icon"></span> <span class="text">Solved?</span>
                  </button>
                  {%endif %}
                {% endfor %}
                <!-- If a user is authenticated, give them a place to provide an answer -->
                {%if current_user.is_authenticated %}
                <fieldset>
                  <div class="form-group">
                    <label for="textArea" class="col-lg-2 control-label">Answer</label>
                    <div class="col-lg-10">
                      <textarea class="form-control" name="answer" rows="3" id="textArea"></textarea>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-lg-10 col-lg-offset-2">
                      <button type="submit" class="btn btn-primary" name="answer", value = "answer">Submit</button>
                    </div>
                  </div>
                </fieldset>
                {%endif %}
                <!-- If no user logged in, prompt to sign in -->
                {% if not current_user.is_authenticated %}
                <div class="border-top pt-3">
                  <small class="text-muted">
                      Think you can help? <a class="ml-2" href="{{ url_for('register') }}">Sign Up Now!</a>
                  </small>
                </div>
                {%endif %}
              </form>
            </div>
          </div>
        </div>
      </div>
{% endblock %}